# DOM ç®€ä»‹

DOM å…¨ç§° Document Object Modelï¼Œå³æ–‡æ¡£(çš„)å¯¹è±¡æ¨¡å‹ã€‚JavaScript æ˜¯å…¶ä¸­ä¸€ç§å¯ç”¨äºæ“ä½œ DOM çš„ç¼–ç¨‹è¯­è¨€ã€‚

DOM è§„èŒƒ
* W3C https://www.w3.org/TR/dom
* WhatWG https://dom.spec.whatwg.org

## DOM æ ‘ ğŸŒ²
æ‰“å¼€ Chrome å¼€å‘å·¥å…·
* `Win` F12
* `Mac` Command + Option + I

é€‰æ‹© **Elements** æ ‡ç­¾ï¼ŒDOM æ ‘å°±åœ¨çœ¼å‰ã€‚ğŸ’¡ åœ¨ Chrome Console ä¸­ï¼Œ`$0` ä»£è¡¨å½“å‰é€‰ä¸­çš„å…ƒç´ ã€‚

### DOM èŠ‚ç‚¹
DOM æ ‘ç”±èŠ‚ç‚¹(Node)æ„æˆï¼Œä¸€å…±æœ‰ 12 ç§èŠ‚ç‚¹ https://dom.spec.whatwg.org/#node ï¼Œå¸¸ç”¨çš„æœ‰ä»¥ä¸‹å‡ ç§ã€‚
* æ–‡æ¡£èŠ‚ç‚¹ `document`
* å…ƒç´ èŠ‚ç‚¹ Element Node
* æ–‡æœ¬èŠ‚ç‚¹ Text Node
* æ³¨é‡ŠèŠ‚ç‚¹ Comment Node

## document å¯¹è±¡
`document` å¯¹è±¡ä»£è¡¨æ•´ä¸ªæ–‡æ¡£ï¼Œå³ DOM æ ‘ã€‚
```javascript
> document
â†’ â–¶ï¸ #document

> document.doctype Â  Â  Â  Â  Â   // æ–‡æ¡£ç±»å‹
â†’ Â  <!DOCTYPE html> Â  Â  Â  Â  Â  // è¿”å›ç»“æœç”±å®é™…æƒ…å†µå†³å®š

> document.head               // <head>
â†’ â–¶ï¸ <head>â€¦</head>            // è¿”å›ç»“æœç”±å®é™…æƒ…å†µå†³å®š

> document.body               // <body>
â†’ â–¶ï¸ <body>â€¦</body> Â  Â  Â       // è¿”å›ç»“æœç”±å®é™…æƒ…å†µå†³å®š

> document.documentElement Â   // <html>
â†’ â–¶ï¸ <html>â€¦</html> Â  Â         // è¿”å›ç»“æœç”±å®é™…æƒ…å†µå†³å®š

> document.documentElement.clientWidth     // æ–‡æ¡£å®½åº¦(ä¸åŒ…å«æ»šåŠ¨æ¡)
â†’ 1265 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â                // è¿”å›ç»“æœç”±å®é™…æƒ…å†µå†³å®š 

> document.documentElement.clientHeight Â   // æ–‡æ¡£é«˜åº¦(ä¸åŒ…å«æ»šåŠ¨æ¡)
â†’ 640                                      // è¿”å›ç»“æœç”±å®é™…æƒ…å†µå†³å®š

> document.body.style.background = '#CDF5DC'
â†’ "#CDF5DC"
```

`document.getElementById()` æ–¹æ³•ç”¨äºè·å–ç‰¹å®š `id` çš„å…ƒç´ ã€‚
```html
<main id="content"></main>
```
```javascript
> document.getElementById('content')
â†’ â–¶ï¸ <main id="content">â€¦</main>

> window.content
â†’ â–¶ï¸ <main id="content">â€¦</main>
```

## æŸ¥æ‰¾å…ƒç´ 
`element.getElementsByTagName()`

`element.getElementsByClassName()`

`element.querySelector()`

`element.querySelectorAll()`

## Element
### Element å±æ€§
`element.firstElementChild`
```javascript
> document.documentElement.firstElementChild
â†’ â–¶ï¸ <head>â€¦</head>
```

`element.lastElementChild`
```javascript
> document.documentElement.lastElementChild
â†’ â–¶ï¸ <body>â€¦</body>
```

### Element æ–¹æ³•
`Element.prototype.getAttribute()`

`Element.prototype.setAttribute()`

`Element.prototype.hasAttribute()`

`Element.prototype.matches()`

## Node
### Node å±æ€§
`node.nodeName` `åªè¯»` å½“å‰èŠ‚ç‚¹åç§°
```javascript
> document.nodeName
â†’ "#document"

> document.head.nodeName
â†’ "HEAD"
```
`node.nodeType` `åªè¯»` å½“å‰èŠ‚ç‚¹ç±»å‹
```javascript
> document.nodeType
â†’ 9

> document.body.nodeType
â†’ 1
```

### Node æ–¹æ³•

## EventTarget
`EventTarget.prototype.addEventListener()`

`EventTarget.prototype.removeEventListener()`

`EventTarget.prototyoe.dispatchEvent()`

## ç»§æ‰¿å…³ç³»
é€šè¿‡æ·»åŠ ä»¥ä¸‹ `Object.prototype.ctors()` æ–¹æ³•æŸ¥çœ‹æŸä¸ªèŠ‚ç‚¹å¯¹è±¡(æˆ–ä»»æ„å¯¹è±¡)çš„ç»§æ‰¿å…³ç³»ã€‚ 
```javascript
Object.prototype.ctors = function(log = false) {
 Â let ctors = [];
  let proto = Object.getPrototypeOf(this);
  while (proto) {
    ctors.push(proto.constructor);
    proto = Object.getPrototypeOf(proto);
  }
  if (log) ctors.forEach(ctor => console.log(ctor));
  return ctors;
};
```
```javascript
> document.body.ctors(true)
  function HTMLBodyElement() { [native code] }
  function HTMLElement() { [native code] }
  function Element() { [native code] }
  function Node() { [native code] }
  function EventTarget() { [native code] }
 Â function Object() { [native code] }
â†’ â–¶ï¸ (6) [function, function, function, function, function, function]
```

## CSSOM
CSSOM å…¨ç§° CSS Object Modelï¼Œå³ CSS å¯¹è±¡æ¨¡å‹ã€‚https://www.w3.org/TR/cssom-1

## å‚è€ƒé“¾æ¥
* https://css-tricks.com/dom
* https://javascript.info/browser-environment
* https://en.wikipedia.org/wiki/Document_Object_Model
* https://developer.mozilla.org/en-US/docs/Web/API/document
* https://developer.mozilla.org/en-US/docs/Web/API/Node
* https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType
* https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeName
* https://developer.mozilla.org/en-US/docs/Web/API/Element
* https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByTagName
* https://developer.mozilla.org/en-US/docs/Web/API/Element/matches
* https://developer.mozilla.org/en-US/docs/Web/API/EventTarget
* https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementById
* https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByTagName
* https://developer.mozilla.org/en-US/docs/Web/API/Document/createElement
* https://developer.mozilla.org/en-US/docs/Web/API/Document/documentElement
* https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByClassName
* https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model/Introduction
* https://stackoverflow.com/questions/15763358/difference-between-htmlcollection-nodelists-and-arrays-of-objects
