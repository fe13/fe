# å¼‚æ­¥ Asynchronous

## åŒæ­¥ä¸é˜»å¡
äº†è§£å¼‚æ­¥ä¹‹å‰ï¼Œå…ˆäº†è§£ä»€ä¹ˆæ˜¯åŒæ­¥ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå‡çš„ `getJSON()`ï¼Œæ¨¡æ‹ŸåŒæ­¥è¯·æ±‚ã€‚
```javascript
function getJSON(url) {
 Â for (let i = 0; i < 3000000000; i++) i; Â   // æ¨¡æ‹Ÿè¯·æ±‚æ‰€éœ€æ—¶é—´
  
 Â console.log(`JSON - ${url}`);
}

getJSON('https://api.github.com/users/tj');
getJSON('https://api.github.com/users/dhh');
getJSON('https://api.github.com/users/yyx990803');
```
æ‰§è¡Œä»¥ä¸Šä»£ç ï¼Œå¯ä»¥çœ‹å‡ºåœ¨åŒæ­¥çš„æƒ…å†µä¸‹ï¼Œåä¸€ä¸ªè¯·æ±‚éœ€è¦åœ¨å‰ä¸€ä¸ªè¯·æ±‚å®Œæˆåæ‰èƒ½å‘å‡ºï¼Œè¿™ç§ç°è±¡ç§°ä¸º**é˜»å¡**ã€‚
```
|------ 1 ------>|------ 2 ------>|------ 3 ------>|
```

## å¼‚æ­¥ä¸å›è°ƒ
ä¸‹é¢æ˜¯ä¸€ä¸ªä»¥å¼‚æ­¥æ–¹å¼å®ç°çš„ `getJSON()`ï¼Œå…¶ä¸­ `success` è¢«ç§°ä½œå›è°ƒå‡½æ•°ã€‚
```javascript
function getJSON(url, success) {
  let xhr = new XMLHttpRequest();
  xhr.responseType = 'json';
  xhr.open('GET', url);
  xhr.onload = function() {
    if (typeof success === 'function') {
      success(this.response);
    }
  };
  xhr.send();
}

function logUser(user) { console.log(user.name); }

getJSON('https://api.github.com/users/tj', logUser);
getJSON('https://api.github.com/users/dhh', logUser);
getJSON('https://api.github.com/users/yyx990803', logUser);
```
åœ¨å¼‚æ­¥çš„æƒ…å†µä¸‹ï¼Œä»¥ä¸Šä¸‰ä¸ªè¯·æ±‚(å‡ ä¹)æ˜¯åŒæ—¶å‘å‡ºçš„ã€‚
```
1 |--------------->|
2 |---------------->|
3 |----------------->|
```

## å›è°ƒåœ°ç‹±
åœ¨ç®€å•çš„æƒ…å†µä¸‹ï¼Œå›è°ƒå‡½æ•°æ˜¯ä¸é”™çš„é€‰æ‹©ã€‚ä½†æœ‰æ—¶åé¢çš„è¯·æ±‚ä¾èµ–äºå‰é¢è¯·æ±‚çš„ç»“æœï¼Œå¤šä¸ªä¾èµ–å°±ä¼šäº§ç”Ÿå›è°ƒåœ°ç‹±ã€‚
```javascript
// å‡è®¾ QQ çš„ API å¦‚ä¸‹ï¼Œä»¥ä¸‹è¯·æ±‚ç”¨äºè·å– QQ ç”¨æˆ· 650437 ç¬¬ä¸€ä¸ªç¾¤çš„ç¬¬ä¸€ä¸ªæˆå‘˜çš„ä¿¡æ¯ã€‚

getJSON('https://api.qq.com/users/650437', function(user) {
  getJSON(user.groups_url, function(groups) {
 Â  Â getJSON(groups[0].members_url, function(members) {
      getJSON(members[0].url, function(member) {
        console.log(member);
      });
    });
 Â });
})
```
ğŸ˜± æˆ‘ä»¬è¿˜å¿˜äº†å¤„ç†å¯èƒ½å‡ºç°çš„é”™è¯¯å‘¢ï¼

## å‚è€ƒé“¾æ¥
* http://callbackhell.com
* http://javascript.info/callbacks
